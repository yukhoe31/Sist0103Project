<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="utf-8">
<link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
    rel="stylesheet">
<link
    href="https://fonts.googleapis.com/css2?family=Dongle&family=Gaegu&family=Nanum+Pen+Script&family=Noto+Sans+KR:wght@100..900&family=Noto+Serif+KR&display=swap"
    rel="stylesheet">
<link rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
<script src="https://code.jquery.com/jquery-3.7.0.js"></script>
<title>상품 목록</title>
</head>

<body>
    <div style="margin: 100px 100px;">
        <h4>
            <b>총 [[${totalCount}]]개의 상품이 있습니다.</b>
            <button type="button" class="btn btn-outline-success"
                style="margin-left: 200px;" onclick="location.href='addform'">
                상품수령</button>
        </h4>

        <hr>

        <table class="table table-bordered" style="width: 800px;">
            <thead>
                <tr class="table-success">
                    <th width="90px;">번호</th>
                    <th width="200px;">이미지</th>
                    <th width="200px;">상품명</th>
                    <th width="150px;">가격</th>
                    <th width="150px;">날짜</th>
                    <th width="150px;">편집</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="dto, iter : ${list}">
                    <td>[[${iter.index + 1}]]</td>
                    <td>
                        <a>
                            <img th:src="@{/photo/{photo}(photo=${dto.photo})}" style="width: 100px;" border="1" hspace="10">
                        </a>
                    </td>
                    
                    <td>
                      [[${dto.sangpum}]]
                    </td>
                    <td align="right">
                        <span th:text="${#numbers.formatInteger(dto.price, 0, 'COMMA')}"></span>
                    </td>
                    <td align="center">
                        <span th:text="${#dates.format(dto.writeday, 'yyyy-MM-dd')}"></span>
                    </td>
                    <td>
                        <button type="button" class="btn btn-outline-primary"
                            onclick="location.href='updateform?num=[[${dto.num}]]'">수정</button>
                        <button type="button" class="btn btn-outline-danger"
                            onclick="confirmDelete('[[${dto.num}]]')">삭제</button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

    <script>
        function confirmDelete(num) {
            if (confirm('정말 삭제하시겠습니까?')) {
                location.href = 'delete?num=' + num;
            }
        }
    </script>
</body>
</html>
